{"remainingRequest":"/home/rubi/Documents/GitHub/LIM-banco-de-proyectos/movie-rubi/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/rubi/Documents/GitHub/LIM-banco-de-proyectos/movie-rubi/src/components/users/CardMovie.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/rubi/Documents/GitHub/LIM-banco-de-proyectos/movie-rubi/src/components/users/CardMovie.vue","mtime":1587984003795},{"path":"/home/rubi/Documents/GitHub/LIM-banco-de-proyectos/movie-rubi/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/rubi/Documents/GitHub/LIM-banco-de-proyectos/movie-rubi/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/rubi/Documents/GitHub/LIM-banco-de-proyectos/movie-rubi/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/rubi/Documents/GitHub/LIM-banco-de-proyectos/movie-rubi/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBNb3ZpZUNvbXAgZnJvbSAnLi9Nb3ZpZUNvbXAnCmltcG9ydCBNb3ZpZUZhdiBmcm9tICcuL01vdmllRmF2JwppbXBvcnQgU2VhcmNoQ29tcCBmcm9tICcuL1NlYXJjaENvbXAnCgogICAgY29uc3QgQVBJS0VZID0gJ2M5MzUxNzk4Y2Y4YTIzNWE2ZDZiMjRlMDY0NjYyNDU0JzsKICAgIGNvbnN0IEJBU0VVUkwgPSAnaHR0cHM6Ly9hcGkudGhlbW92aWVkYi5vcmcvMyc7CiAgZXhwb3J0IGRlZmF1bHQgewpkYXRhICgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgIAogICAgICAgICAgICBhZGQ6IDAsCiAgICAgICAgICAgIHVzZXI6IHsKICAgICAgICAgICAgICAgIG5hbWU6ICdKZXN1cycsCiAgICAgICAgICAgICAgICBsYXN0TmFtZTogJ0xvcGV6JwogICAgICAgICAgICB9LAogICAgICAgICAgICBvbGRVc2VyOiBudWxsLAogICAgICAgICAgICBtb3ZpZXM6IFsKICAgICAgICAgICAgICAgCiAgICAgICAgICAgIF0sCiAgICAgICAgICAgIHNlYXJjaE1vdmllczogewoKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2hvd0ZhdjogZmFsc2UsCiAgICAgICAgICAgIHBhZ2U6IDEsCiAgICAgICAgICAgIHRvdGFsX3BhZ2VzOiBudWxsCiAgICAgICAgfQogICAgfSwKICAgIGNvbXB1dGVkOnsKICAgICAgICAuLi5WdWV4Lm1hcFN0YXRlKFsnZmF2TW92aWVzJywnY291bnRlciddKQogICAgfSwKICAgIHdhdGNoOiB7CiAgICAgICAgcGFnZSAoKSB7CiAgICAgICAgICAgIHRoaXMuZ2V0UG9wdWxhck1vdmllcygpCiAgICAgICAgfQogICAgfSwKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICBNb3ZpZUNvbXAsCiAgICAgICAgTW92aWVGYXYsCiAgICAgICAgU2VhcmNoQ29tcAogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICAKICAgICAgICBvblRvZ2dsZUxpa2UgKGRhdGEpIHsKICAgICAgICAgICAgbGV0IG1vdmllTGlrZSA9IHRoaXMubW92aWVzLmZpbmQobW92aWUgPT4gbW92aWUuaWQgPT0gZGF0YS5pZCkKICAgICAgICAgICAgbW92aWVMaWtlLmxpa2UgPSBkYXRhLmxpa2UKICAgICAgICAgICAgLy8gdGhpcy4kc3RvcmUuY29tbWl0KCd0b2dnbGVGYXZNb3ZpZScsIG1vdmllTGlrZSkKICAgICAgICAgICAgdGhpcy5zdG9yZUZhdm9yaXRhKG1vdmllTGlrZSkKICAgICAgICAgICAgdGhpcy5zaG93RmF2ID0gZGF0YS5saWtlCiAgICAgICAgfSwKICAgICAgICBnZXRQb3B1bGFyTW92aWVzICgpIHsKICAgICAgICAgICAgY29uc3QgVVJMID0gYCR7QkFTRVVSTH1kaXNjb3Zlci9tb3ZpZT9zb3J0X2J5PXBvcHVsYXJpdHkuZGVzYyZhcGlfa2V5PSR7QVBJS0VZfSZwYWdlPSR7dGhpcy5wYWdlfWAKICAgICAgICAgICAgZmV0Y2goVVJMKQogICAgICAgICAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4gcmVzcG9uc2UuanNvbigpKQogICAgICAgICAgICAgICAgLnRoZW4oKHtyZXN1bHRzLCBwYWdlLCB0b3RhbF9wYWdlc30pID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwYWdlLCB0b3RhbF9wYWdlcykKICAgICAgICAgICAgICAgICAgICB0aGlzLnRvdGFsX3BhZ2VzID0gdG90YWxfcGFnZXMKICAgICAgICAgICAgICAgICAgICB0aGlzLm1vdmllcyA9IHJlc3VsdHMubWFwKG0gPT4gewogICAgICAgICAgICAgICAgICAgICAgICBtLmxpa2UgPSBmYWxzZQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgc2V0UGFnZSAocGFnZSkgewogICAgICAgICAgICB0aGlzLnBhZ2UgPSBwYWdlCiAgICAgICAgICAgIHRoaXMuZ2V0UG9wdWxhck1vdmllcygpIAogICAgICAgIH0sCiAgICAgICAgLi4uVnVleC5tYXBNdXRhdGlvbnMoewogICAgICAgICAgICBzdG9yZUZhdm9yaXRhOiAndG9nZ2xlRmF2TW92aWUnCiAgICAgICAgfSkKICAgICAgICAvLyBvbkhpZGVGYXYgKHNob3cpIHsKICAgICAgICAvLyAgICAgdGhpcy5zaG93RmF2ID0gc2hvdwogICAgICAgIC8vIH0KICAgIH0sCiAgICBtb3VudGVkKCkgewogICAgICAgIGxldCBsb2NhdGlvblVSTCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uLmhyZWYpCiAgICAgICAgdGhpcy5wYWdlID0gbG9jYXRpb25VUkwuc2VhcmNoUGFyYW1zLmdldCgncGFnZScpIHx8IDEKICAgIAogICAgICAgIHRoaXMuZ2V0UG9wdWxhck1vdmllcygpCiAgICB9LAp9Cg=="},{"version":3,"sources":["CardMovie.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"CardMovie.vue","sourceRoot":"src/components/users","sourcesContent":["<template>\n  <div class=\"container\">\n    <h5>Bienvenido {{ user.name }} {{ user.lastName }}</h5>\n    <SearchComp ref=\"searchComp\" v-model=\"searchMovies\"/>\n    <div v-show=\"! Object.keys(searchMovies).length\">\n        <h1>Peliculas App </h1>\n        <pre>{{ favMovies }}</pre>\n        <div class=\"row\">\n            <div class=\"col-12  col-md-6 col-lg-4 py-3\" v-for=\"(movie, key) in movies\" \n            :key=\"key\">\n                <MovieComp \n                :id=\"movie.id\" \n                :title=\"movie.title\" \n                :synopsis=\"movie.overview\" \n                :cover=\"movie.poster_path\"\n                :like=\"movie.like\"\n                @toggleLike=\"onToggleLike\"\n                />\n            </div>\n        </div>\n        <div class=\"row\">\n            <button @click=\"setPage(n)\" class=\"btn m-1\" :class=\"{\n                'btn-light': n != page,\n                'btn-primary': n == page\n            }\" v-for=\"(n, index) in total_pages\" :key=\"index\">\n                {{n}}\n                \n            </button>\n        </div>\n    </div>\n    <div v-show=\"Object.keys(searchMovies).length\">\n        <h1>Resultados de busqueda</h1>\n        <div class=\"row\">\n            <div class=\"col-12  col-md-6 col-lg-4 py-3\" v-for=\"(movie, key) in searchMovies.results\" \n            :key=\"key\"\n            v-if=\"movie.poster_path\">\n                <MovieComp \n                :id=\"movie.id\" \n                :title=\"movie.title\" \n                :synopsis=\"movie.overview\" \n                :cover=\"movie.poster_path\"\n                :like=\"movie.like\"\n                @toggleLike=\"onToggleLike\"\n                />\n            </div>\n        </div>  \n        <div class=\"row\">\n            <button @click=\"$refs.searchComp.setPage(n)\" class=\"btn m-1\" :class=\"{\n                'btn-light': n != searchMovies.page,\n                'btn-primary': n == searchMovies.page\n            }\" v-for=\"(n, index) in searchMovies.total_pages\" :key=\"index\">\n                {{n}}\n                \n            </button>\n        </div> \n    </div>\n    \n    <MovieFav :show.sync=\"showFav\"/>\n  </div>\n</template>\n\n<script>\nimport MovieComp from './MovieComp'\nimport MovieFav from './MovieFav'\nimport SearchComp from './SearchComp'\n\n    const APIKEY = 'c9351798cf8a235a6d6b24e064662454';\n    const BASEURL = 'https://api.themoviedb.org/3';\n  export default {\ndata () {\n        return {\n           \n            add: 0,\n            user: {\n                name: 'Jesus',\n                lastName: 'Lopez'\n            },\n            oldUser: null,\n            movies: [\n               \n            ],\n            searchMovies: {\n\n            },\n            showFav: false,\n            page: 1,\n            total_pages: null\n        }\n    },\n    computed:{\n        ...Vuex.mapState(['favMovies','counter'])\n    },\n    watch: {\n        page () {\n            this.getPopularMovies()\n        }\n    },\n    components: {\n        MovieComp,\n        MovieFav,\n        SearchComp\n    },\n    methods: {\n        \n        onToggleLike (data) {\n            let movieLike = this.movies.find(movie => movie.id == data.id)\n            movieLike.like = data.like\n            // this.$store.commit('toggleFavMovie', movieLike)\n            this.storeFavorita(movieLike)\n            this.showFav = data.like\n        },\n        getPopularMovies () {\n            const URL = `${BASEURL}discover/movie?sort_by=popularity.desc&api_key=${APIKEY}&page=${this.page}`\n            fetch(URL)\n                .then(response => response.json())\n                .then(({results, page, total_pages}) => {\n                    console.log(page, total_pages)\n                    this.total_pages = total_pages\n                    this.movies = results.map(m => {\n                        m.like = false\n                        return m\n                    })\n                })\n        },\n        setPage (page) {\n            this.page = page\n            this.getPopularMovies() \n        },\n        ...Vuex.mapMutations({\n            storeFavorita: 'toggleFavMovie'\n        })\n        // onHideFav (show) {\n        //     this.showFav = show\n        // }\n    },\n    mounted() {\n        let locationURL = new URL(window.location.href)\n        this.page = locationURL.searchParams.get('page') || 1\n    \n        this.getPopularMovies()\n    },\n}\n</script>"]}]}